# UX Guide

Stash의 사용자 경험 설계 원칙과 화면 구성.

---

## 1. 핵심 원칙

> **저장은 1탭, 정리는 앱이, 검색은 AI가.**

- 저장 과정에서 유저에게 선택을 강요하지 않는다.
- 카테고리는 앱이 자동으로 분류한다.
- 검색이 폴더보다 중요하다. 정리 안 해도 찾을 수 있어야 한다.

---

## 2. 저장 플로우 (Share Extension)

### 기본 플로우: 1탭 저장

```
다른 앱에서 공유하기 → Stash 아이콘 탭 → 저장 완료
모달 없음. 폴더 선택 없음.
토스트: "저장 완료 ✓" (2초 후 자동 닫힘)
```

### 토스트 옵션 (선택적)

토스트에 "컬렉션 변경" 링크를 제공한다. 탭하면 컬렉션 선택 시트가 열린다.
대부분의 유저는 무시하고 그냥 저장만 할 것이다.

### 백그라운드 처리

Share Extension에서는 URL만 저장. 이후 메인 앱에서:
1. 단축 URL 리다이렉트 해소
2. 콘텐츠 타입 자동 판별 (URL 도메인 기반)
3. 메타데이터 추출 (OG 태그, oEmbed 등)
4. 임베딩 벡터 생성 (시맨틱 검색용)

---

## 3. 메인 화면

### 레이아웃

```
┌─────────────────────────────┐
│  🔍 검색                      │
├─────────────────────────────┤
│ [전체] [영상] [장소] [쇼핑] [아티클] │
├──────────┬──────────────────┤
│          │                  │
│  카드 1    │  카드 2           │
│          │                  │
├──────────┼──────────────────┤
│          │                  │
│  카드 3    │  카드 4           │
│          │                  │
└──────────┴──────────────────┘
```

- **검색바**: 항상 상단에 노출
- **필터 칩**: 콘텐츠 타입별 자동 분류 필터 (가로 스크롤)
- **카드 그리드**: 2열, 역순 정렬 (최신순)
- 기본 탭은 "전체"

### 필터 칩 (자동 카테고리)

| 칩 | 매핑 소스 |
|----|---------|
| 전체 | 모든 콘텐츠 |
| 영상 | YouTube, Instagram Reel |
| 장소 | 네이버지도, 구글맵, 카카오맵 |
| 쇼핑 | 쿠팡, 네이버쇼핑, 무신사 등 |
| 아티클 | 블로그, 뉴스, 일반 웹페이지 |
| 인스타 | Instagram 포스트 |

새로운 소스가 추가되면 기존 카테고리에 매핑하거나 새 칩을 추가한다.

---

## 4. 콘텐츠 카드 디자인

소스별로 카드 UI를 차별화한다.

### YouTube 카드
```
┌────────────────────┐
│ ▶ 썸네일 (16:9)      │
│              12:34  │
├────────────────────┤
│ 영상 제목 두 줄까지...  │
│ 채널명 · 3일 전        │
└────────────────────┘
```

### Instagram 카드
```
┌────────────────────┐
│                    │
│   이미지 (1:1)       │
│                    │
├────────────────────┤
│ @username           │
│ 캡션 미리보기...       │
└────────────────────┘
```

### 장소 카드 (지도)
```
┌────────────────────┐
│ 📍 장소 이미지/지도     │
├────────────────────┤
│ 을지로 OO카페         │
│ 서울 중구 을지로 3가    │
│ [네이버지도] [구글맵]   │
└────────────────────┘
```

### 쇼핑 카드
```
┌────────────────────┐
│                    │
│   상품 이미지         │
│                    │
├────────────────────┤
│ 상품명 두 줄까지...    │
│ ₩29,900            │
└────────────────────┘
```

### 일반 웹 카드
```
┌────────────────────┐
│ OG 이미지            │
├────────────────────┤
│ 페이지 제목           │
│ example.com · 3일 전 │
└────────────────────┘
```

---

## 5. 상세 화면

카드 탭 → 상세 화면:
- 콘텐츠 메타데이터 전체 표시
- **"열기" 버튼**: 원본 앱으로 딥링크 (YouTube 앱, 네이버지도 앱 등)
- 메모 추가/편집
- 컬렉션 변경
- 삭제

---

## 6. 검색

### Phase 1: 키워드 검색
- 제목, URL, 메모 대상 `localizedStandardContains` 검색
- 필터 칩과 조합 가능 (예: "장소" 필터 + "강남" 검색)

### Phase 2: 시맨틱 검색
- 자연어 쿼리 지원: "지난번에 저장한 강남 근처 이탈리안"
- NLContextualEmbedding 기반 벡터 유사도 검색
- 키워드 검색 결과와 시맨틱 검색 결과를 병합하여 랭킹

---

## 7. 컬렉션 (수동 정리)

파워 유저를 위한 선택적 기능:
- 유저가 직접 만드는 폴더 (예: "제주 여행 맛집", "생일 선물 후보")
- 플랫(flat) 구조, 중첩 없음
- 메인 화면과 별도 탭 또는 사이드바에서 접근

### 점진적 정리 제안

| 시점 | 앱 동작 |
|------|--------|
| Day 1 | 콘텐츠 타입 자동 분류만 |
| 일정량 누적 시 | 앱이 제안: "장소 15개 저장하셨어요. '맛집 리스트' 만들어볼까요?" |
| 장기 사용 | AI 검색으로 정리 없이도 원하는 콘텐츠를 찾을 수 있음 |

---

## 8. 딥링크 (원본 앱 이동)

상세 화면의 "열기" 버튼 동작:

| 소스 | 앱 설치됨 | 앱 미설치 |
|------|---------|---------|
| YouTube | Universal Link로 앱 실행 | Safari에서 열기 |
| Instagram | Universal Link로 앱 실행 | Safari에서 열기 |
| 네이버지도 | `nmap://` scheme으로 앱 실행 | App Store로 이동 |
| 구글맵 | Universal Link로 앱 실행 | Safari에서 열기 |
| 쿠팡 | Universal Link로 앱 실행 | Safari에서 열기 |
| 기타 | — | Safari에서 원본 URL 열기 |

---

## 9. 향후 고려 기능

### 스크린샷 연동
- 스크린샷에서 URL/QR코드 감지 → Stash 아이템으로 변환
- 스크린샷 자체를 저장 + OCR로 텍스트 추출

### 위젯
- 최근 저장 아이템 위젯
- 특정 컬렉션 바로가기 위젯
