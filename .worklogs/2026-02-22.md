# Worklog: Stash — 2026-02-22

---

## 12:32

### 요청사항
- Step 3.1: Share Extension에서 URL 수신 로직 구현

### 작업 내용
- URLExtractor enum 생성 (parseURL, extractURL 메서드)
- ShareViewController를 SLComposeServiceViewController → UIViewController로 변경
- UTType.url 우선, UTType.plainText 폴백 방식으로 URL 추출
- URLExtractorTests 작성 (정상 URL, 텍스트 내 URL, 빈 문자열 등 8개 테스트)
- Xcode 프로젝트에 파일 추가 (Stash + StashShareExtension 양쪽 타겟)

### 변경 통계
```
 Stash.xcodeproj/project.pbxproj               | 18 ++++++++
 Stash/Shared/AppGroup/URLExtractor.swift      | 60 +++++++++++++++++++++++++
 StashShareExtension/ShareViewController.swift | 30 +++----------
 StashTests/Shared/URLExtractorTests.swift     | 64 +++++++++++++++++++++++++++
 4 files changed, 149 insertions(+), 23 deletions(-)
```

---

## 12:40

### 요청사항
- Step 3.4: MetadataClient Protocol 정의

### 작업 내용
- ContentMetadata 도메인 모델 생성 (title, description, imageURL, siteName — 모두 Optional)
- MetadataClient DependencyKey 생성 (fetch 클로저, testValue mock 포함)
- ContentClient에 update 클로저 추가
- ContentModelActor에 update() 메서드 구현
- ContentMapper.encodeMetadata 접근 수준 private → internal 변경
- MetadataClientTests 작성 (testValue mock 반환, 기본값 nil, Equatable 검증)

### 변경 통계
```
 Stash.xcodeproj/project.pbxproj             | 12 ++++++++
 Stash/Data/Clients/ContentClientLive.swift  | 13 +++++++++
 Stash/Data/Mappers/ContentMapper.swift      |  2 +-
 Stash/Domain/Models/ContentMetadata.swift   |  8 ++++++
 Stash/Domain/Services/ContentClient.swift   |  7 +++--
 Stash/Domain/Services/MetadataClient.swift  | 31 +++++++++++++++++++++
 StashTests/Domain/MetadataClientTests.swift | 43 +++++++++++++++++++++++++++++
 7 files changed, 113 insertions(+), 3 deletions(-)
```
